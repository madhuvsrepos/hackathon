var alignMobile;$(function(){var choosistProduct=$('#product').val();var choosistProductSingular=$('#productSingular').val();var choosistProductPlural=$('#productPlural').val();var zeroMatchMessage="<div class=\"narrow\">We couldn't find any "+choosistProduct+' that match your selections. <br><br>Please click "<b>Remove Last Selection</b>" below to <b>tweak your choices</b>.</div>';var zeroMatchTitleOriginal='Sorry, no '+choosistProduct+' found';var zeroMatchbuttonTextOriginal='Remove Last Selection';var customZeroMatchMessage='';var zeroMatchTitle='';var zeroMatchbuttonText='';alignMobile=(function(){var width=$(window).width();var viewportHeight=$(window).height();if(width<991){var centerDiv=$(".center-div").height();var realViewPortHeight=viewportHeight;if(screen.width>=768)
{realViewPortHeight=realViewPortHeight-70;}
if(centerDiv>(realViewPortHeight-100)){var mTop=centerDiv/2;mTop=mTop-40;var topV=80;if(screen.width>=768)
{topV=30}
$(".center-div").css("margin-top","0px");if($('#holding').is(':visible')){$(".center-div").css("top","50%");}
else{$(".center-div").css("top",topV+"px");}}
else{var adjFact=0;if(screen.width>=768)
{adjFact=70}
var mTop=(centerDiv/2)-10+adjFact;$(".center-div").css("margin-top","-"+mTop+"px");$(".center-div").css("top","50%");}}
else{$(".center-div").css("margin-top","");}});$(".no-btn").on('click','.disabled',function(){swal({html:true,title:zeroMatchTitle,text:zeroMatchMessage,type:"error"});$(".sweet-alert").animate({scrollTop:0},0);zeroMatchbuttonText=zeroMatchbuttonTextOriginal;$(".sa-confirm-button-container button").html(zeroMatchbuttonText);return false;});$('.btn-rev-click').click(function(){$(".sidebar").toggleClass('open-side');$("body").addClass("fixedBody");$("#optionsSwitch").removeClass("hidden-xs");$("#budgetSwitch").addClass("hidden-xs");setTimeout(function(){$(".sidebar").toggleClass('complete');},600);});$('.btn-sort-click').click(function(){$(".sidebar").toggleClass('open-side');$("body").addClass("fixedBody");$("#optionsSwitch").addClass("hidden-xs");$("#budget-main").css("style","display:block !important");$("#budgetSwitch").removeClass("hidden-xs");setTimeout(function(){$(".sidebar").toggleClass('complete');},600);});$('.close-btn').click(function(){$(".sidebar").removeClass('open-side');$(".sidebar").removeClass('complete');$("body").removeClass("fixedBody");});$("body").on('click','.subcat-btn',function(){var previousQuestionID=$(this).data('id');var type=$(this).data('type');var backBtn=$(this).data('btn');var currentMatch=$("#match-num").html();var questionID=$("#questionID").val();var questionOrder=$("#questionOrder").val();var rewind=$("#rewind").val();$(".prev-ring").addClass('visible');$(this).find(".fa").addClass("hide-icon");$.ajax({type:"POST",url:"/php/ajax/getMarkup.php?product="+choosistProduct,data:{previousQuestionID:previousQuestionID,type:type,backBtn:backBtn,currentMatch:currentMatch,questionID:questionID,questionOrder:questionOrder,rewind:rewind},dataType:"json",success:function(data){if(data.status=="success"){$("#question-wrap").html(data.html);$("#text-box").html(data.questionhtml);$("#skipToResults").html(data.laptopNo);$("#back-btn").html(data.backBtn);if(data.prevSelect!=""){$("#next-btn").addClass('valid');}
$("#questionID").val(data.questionID);$("#questionOrder").val(data.questionOrder);if(data.questionOrder<2)
{$("#back-btn").css("opacity","0.3");$("body").on('click','#back-btn',function(){return false;});$("#questionType").val(2);}
alignMobile();var qCount=parseInt(data.questCount+1);gaTrack(window.location.pathname+'/'+qCount,'Wizard Question '+qCount);$("#priceRange").fadeOut();var selectionList='';var currentMatch=$("#match-num").html();$('.multi-selected').each(function(i,obj){selectionList+=$(obj).data('id')+',';});var isSelected=false;var oldLap=$("#match-num").html();var lastSelectionID=null;$.ajax({type:"POST",url:"/php/ajax/getPriceRangeTagging.php?product="+choosistProduct,data:{selectionID:selectionList,oldLap:oldLap,lastSelectionID:lastSelectionID,isSelected:isSelected},dataType:"json",async:true,success:function(data){if(data.status=="success"){if(data.laptopCount!=1)
{setProductSingOrPlur(data.laptopCount);}
var numAnim=new CountUp("match-num",data.oldLaptopCount,data.laptopCount);numAnim.start(setProductSingOrPlur);$("#priceRange").fadeIn();$("#priceRange").html(data.priceRange);if(data.laptopCount==0){$(".skip-btn").addClass("disabled");$(".next-btn-click").addClass("disabled");ga('send','event','Wizard page','Zero matches',$("#questionID").val());if(isSelected){if(data.zMCMessageBudget!='')
{zeroMatchTitle='Sorry, no '+choosistProduct+' found within your budget';customZeroMatchMessage=data.zMCMessageBudget;}
else if(data.zMCMessage!='')
{zeroMatchTitle='Sorry, no '+choosistProduct+' found';customZeroMatchMessage=data.zMCMessage;}
else
{zeroMatchTitle=zeroMatchTitleOriginal;customZeroMatchMessage=zeroMatchMessage;}
swal({html:true,title:zeroMatchTitle,text:customZeroMatchMessage,type:"error"});$(".sweet-alert").animate({scrollTop:0},0);zeroMatchbuttonText=zeroMatchbuttonTextOriginal;$(".sa-confirm-button-container button").html(zeroMatchbuttonText);}}
else{$(".next-btn-click").removeClass("disabled");}}},});$(".fa").removeClass("hide-icon");$(".prev-ring").removeClass('visible');}
else if(data.status=="error"){}},});return false;});$("body").on('click','.subcat-multi-btn',function(){dID=$(this).data("id");if($(this).hasClass("masterOption")){$(".question-btn").removeClass("multi-selected");$(".option-info").removeClass("option-info-selected");}
else{$(".masterOption").removeClass("multi-selected");$("#optioninfo-"+dID).removeClass("option-info-selected");}
$(this).toggleClass("multi-selected");if($("#optioninfo-"+dID).html()!=''&&$(this).hasClass("multi-selected"))
{$("#optioninfo-"+dID).addClass("option-info-selected");}
var count=0;$('.multi-selected').each(function(i,obj){count++;});if(count>0){$("#next-btn").addClass("valid");}
else{$("#next-btn").removeClass("valid");}
var count=0;$('.multi-selected').each(function(i,obj){count++;});if(count==0){$(".skip-btn").addClass("hide-btn");}
else{$(".skip-btn").removeClass("hide-btn");}
return false;});$("body").on('click','.subcat-single-btn',function(){dID=$(this).data("id");var prevSelected=$(this).hasClass("multi-selected");$(".subcat-single-btn").removeClass("multi-selected");$(".option-info").removeClass("option-info-selected");if(prevSelected==false){$(this).toggleClass("multi-selected");}
if($("#optioninfo-"+dID).html()!=''&&$(this).hasClass("multi-selected"))
{$("#optioninfo-"+dID).addClass("option-info-selected");}
var count=0;$('.multi-selected').each(function(i,obj){count++;});if(count>0){$("#next-btn").addClass("valid");}
else{$("#next-btn").removeClass("valid");}
return false;});$("body").on('click','.next-btn-click',function(){var count=0;if(!$(this).hasClass("disabled")){$("#back-btn").css("opacity","1");var selectionID=0;var type=0;var backBtn=0;var budget=0;var viewPortWidth=$(window).width();var currentMatch=$("#match-num").html();$('.multi-selected').each(function(i,obj){selectionID+=$(obj).data('id')+',';type=$(obj).data('type');backBtn=$(obj).data('btn');count++;});if(count>0){$(".next-ring").addClass('visible');$(this).find(".fa").addClass("hide-icon");selectionID=selectionID.substring(0,selectionID.length-1);var questionID=$("#questionID").val();var questionOrder=$("#questionOrder").val();var rewind=$("#rewind").val();var qType=$("#questionType").val();if(qType==2)
{budget=$('.multi-selected').data('id');selectionID='';}
else
{qType=1}
$.ajax({type:"POST",url:"/php/ajax/getMarkup.php?product="+choosistProduct,data:{selectionID:selectionID,type:type,backBtn:backBtn,currentMatch:currentMatch,questionID:questionID,questionOrder:questionOrder,questionType:qType,budget:budget,rewind:rewind},dataType:"json",success:function(data){if(data.status=="success"){$("#questionID").val(data.questionID);$("#questionOrder").val(data.questionOrder);if(data.aq=="results"){$("#holding").show();$("#text-box").hide();$(".question-box").hide();$("#laptopNo").hide();alignMobile();window.location.replace("/"+data.region+"/"+choosistProduct+"/results/"+data.session);$(".next-ring").hide();}
else if(data.aq=="nolaptops"){swal({html:true,title:zeroMatchTitle,text:zeroMatchMessage,type:"error"});$(".sweet-alert").animate({scrollTop:0},0);zeroMatchbuttonText=zeroMatchbuttonTextOriginal;$(".sa-confirm-button-container button").html(zeroMatchbuttonText);$(".fa").removeClass("hide-icon");$(".next-ring").removeClass('visible');}
else
{$("#question-wrap").html(data.html);$("#text-box").html(data.questionhtml);$("#debug").html(data.debug);$("#skipToResults").html(data.laptopNo);$("#back-btn").html(data.backBtn);$("#next-btn").removeClass("valid");alignMobile();$(".fa").removeClass("hide-icon");$(".next-ring").removeClass('visible');$("#questionType").val(data.questionType);var qCount=parseInt(data.questCount+1);gaTrack(window.location.pathname+'/'+qCount,'Wizard Question '+qCount);if(viewPortWidth<991){$("html, body").animate({scrollTop:0},"slow");}
var oldLap=currentMatch;var selectionID="";$.ajax({type:"POST",url:"/php/ajax/getPriceRangeTagging.php?product="+choosistProduct,data:{selectionID:selectionID,oldLap:oldLap},dataType:"json",async:true,success:function(data){if(data.status=="success"){if(data.laptopCount!=1)
{setProductSingOrPlur(data.laptopCount);}
var numAnim=new CountUp("match-num",data.oldLaptopCount,data.laptopCount);numAnim.start(setProductSingOrPlur);$("#priceRange").fadeIn();$("#priceRange").html(data.priceRange);}},});}}
else if(data.status=="error"){$(this).find(".fa").show();$(this).find(".fa").removeClass("hide-icon");$(".next-ring").removeClass('visible');}},});}
else{swal({html:true,title:"<div style='margin-top: 40px;'>Please <b>select an option</b> to continue</div>",text:"",type:"error",customClass:"next-btn-alert"});$(".sweet-alert").animate({scrollTop:0},0);zeroMatchbuttonText='Back to Question';$(".sa-confirm-button-container button").html(zeroMatchbuttonText);}}
else{swal({html:true,title:zeroMatchTitle,text:zeroMatchMessage,type:"error"});$(".sweet-alert").animate({scrollTop:0},0);zeroMatchbuttonText=zeroMatchbuttonTextOriginal;$(".sa-confirm-button-container button").html(zeroMatchbuttonText);}
return false;});$("body").on('click','.skip-btn',function(){var count=0;$("#back-btn").css("opacity","1");var selectionID=0;var type=0;var backBtn=0;var viewPortWidth=$(window).width();var currentMatch=$("#match-num").html();$('.multi-selected').each(function(i,obj){selectionID+=$(obj).data('id')+',';type=$(obj).data('type');backBtn=$(obj).data('btn');count++;});ga('send','event','Wizard page','Skip to results',$("#questionID").val());if(count>0){selectionID=selectionID.substring(0,selectionID.length-1);var questionID=$("#questionID").val();var questionOrder=$("#questionOrder").val();var rewind=$("#rewind").val();$.ajax({type:"POST",url:"/php/ajax/getMarkup.php?product="+choosistProduct,data:{selectionID:selectionID,type:type,backBtn:backBtn,currentMatch:currentMatch,questionID:questionID,questionOrder:questionOrder,rewind:rewind},dataType:"json",success:function(data){if(data.status=="success"){$("#questionID").val(data.questionID);$("#questionOrder").val(data.questionOrder);if(data.aq=="results"){$("#holding").show();$("#text-box").hide();$(".question-box").hide();$("#laptopNo").hide();alignMobile();window.location.replace("/"+data.region+"/"+choosistProduct+"/results/"+data.session);$(".next-ring").hide();$("#holding").show();$("#text-box").hide();$(".question-box").hide();$("#laptopNo").hide();alignMobile();}
else if(data.aq=="nolaptops"){swal({html:true,title:zeroMatchTitle,text:zeroMatchMessage,type:"error"});$(".sweet-alert").animate({scrollTop:0},0);zeroMatchbuttonText=zeroMatchbuttonTextOriginal;$(".sa-confirm-button-container button").html(zeroMatchbuttonText);$(".fa").removeClass("hide-icon");$(".next-ring").removeClass('visible');}
else{$("#holding").show();$("#text-box").hide();$(".question-box").hide();$("#laptopNo").hide();alignMobile();window.location.replace("/"+data.region+"/"+choosistProduct+"/results/"+data.session);}}
else if(data.status=="error"){$(this).find(".fa").show();$(this).find(".fa").removeClass("hide-icon");$(".next-ring").removeClass('visible');}},});}
else{$("#holding").show();$("#text-box").hide();$(".question-box").hide();$("#laptopNo").hide();alignMobile();return true;}
return false;});alignMobile();$(window).on('resize',function(){alignMobile();});var $hamburger=$(".hamburger");$hamburger.on("click",function(e){$hamburger.toggleClass("is-active");$(".mobile-nav-wrap").toggleClass("show-menu");});$("body").on('click','.question-box .question-btn',function(){var oldLap=$("#match-num").html();$("#priceRange").fadeOut();var selectionID='';var type=0;var backBtn=0;var budget=0;var lastSelectionID='';var currentMatch=$("#match-num").html();var isSelected=$(this).hasClass("multi-selected");var qType=$("#questionType").val();if(qType==2)
{if(isSelected){budget=$(this).data('id');}}
else
{lastSelectionID=$(this).data('id');$('.multi-selected').each(function(i,obj){selectionID+=$(obj).data('id')+',';});qType=1}
$.ajax({type:"POST",url:"/php/ajax/getPriceRangeTagging.php?product="+choosistProduct,data:{selectionID:selectionID,oldLap:oldLap,lastSelectionID:lastSelectionID,isSelected:isSelected,budget:budget,questionType:qType},dataType:"json",async:true,success:function(data){if(data.status=="success"){if(data.laptopCount!=1)
{setProductSingOrPlur(data.laptopCount);}
var numAnim=new CountUp("match-num",data.oldLaptopCount,data.laptopCount);numAnim.start(setProductSingOrPlur);$("#priceRange").fadeIn();$("#priceRange").html(data.priceRange);if(data.laptopCount==0){$(".skip-btn").addClass("disabled");$(".next-btn-click").addClass("disabled");if(isSelected){if(data.zMCMessageBudget!='')
{zeroMatchTitle='Sorry, no '+choosistProduct+' found within your budget';customZeroMatchMessage=data.zMCMessageBudget;ga('send','event','Wizard page','Zero Matches - Budget',$("#questionID").val());}
else if(data.zMCMessage!='')
{zeroMatchTitle='Sorry, no '+choosistProduct+' found';customZeroMatchMessage=data.zMCMessage;ga('send','event','Wizard page','Zero Matches - Possible Conflicts',$("#questionID").val());}
else
{zeroMatchTitle=zeroMatchTitleOriginal;customZeroMatchMessage=zeroMatchMessage;ga('send','event','Wizard page','Zero Matches - Other',$("#questionID").val());}
swal({html:true,title:zeroMatchTitle,text:customZeroMatchMessage,type:"error"},function(){$("a[data-id='"+lastSelectionID+"']").click();});$(".sweet-alert").animate({scrollTop:0},0);zeroMatchbuttonText=zeroMatchbuttonTextOriginal;$(".sa-confirm-button-container button").html(zeroMatchbuttonText);}}
else{$(".next-btn-click").removeClass("disabled");}}},});return false;});$("body").on('click','.zm-remove-option-btn',function(){var selectionID=$(this).data('id');var selIDForZeroMatch=$(this).data('last-select-id');$("a[data-id='"+selectionID+"']").removeClass("multi-selected");swal.close();$.ajax({type:"POST",url:"/php/ajax/removeOption.php?product="+choosistProduct,data:{selectionID:selectionID},dataType:"json",async:true,success:function(data){$("#priceRange").fadeOut();var selectionList='';var currentMatch=$("#match-num").html();$('.multi-selected').each(function(i,obj){selectionList+=$(obj).data('id')+',';});var isSelected=false;var oldLap=$("#match-num").html();var lastSelectionID=null;$.ajax({type:"POST",url:"/php/ajax/getPriceRangeTagging.php?product="+choosistProduct,data:{selectionID:selectionList,oldLap:oldLap,lastSelectionID:lastSelectionID,isSelected:isSelected},dataType:"json",async:true,success:function(data){if(data.status=="success"){if(data.laptopCount!=1)
{setProductSingOrPlur(data.laptopCount);}
var numAnim=new CountUp("match-num",data.oldLaptopCount,data.laptopCount);numAnim.start(setProductSingOrPlur);$("#priceRange").fadeIn();$("#priceRange").html(data.priceRange);if(data.laptopCount==0){$(".skip-btn").addClass("disabled");$(".next-btn-click").addClass("disabled");$("a[data-id='"+selIDForZeroMatch+"']").removeClass("multi-selected");$("a[data-id='"+selIDForZeroMatch+"']").click();ga('send','event','Wizard page','Zero matches',$("#questionID").val());}
else{$(".next-btn-click").removeClass("disabled");}}},});},});return false;});$("body").on('change','.zm-change-budget-dropdown',function(){var budget=$(this).val();$(".budget-btn").removeClass("multi-selected");$("a[data-id='"+budget+"']").addClass("multi-selected");swal.close();if($("#questionType").val()==2)
{$("a[data-id='"+budget+"']").click();}
else{$.ajax({type:"POST",url:"/php/ajax/changeBudget.php?product="+choosistProduct,data:{budget:budget},dataType:"json",async:true,success:function(data){$("#priceRange").fadeOut();var selectionList='';var currentMatch=$("#match-num").html();$('.multi-selected').each(function(i,obj){selectionList+=$(obj).data('id')+',';});var isSelected=false;var oldLap=$("#match-num").html();var lastSelectionID=null;$.ajax({type:"POST",url:"/php/ajax/getPriceRangeTagging.php?product="+choosistProduct,data:{selectionID:selectionList,oldLap:oldLap,lastSelectionID:lastSelectionID,isSelected:isSelected},dataType:"json",async:true,success:function(data){if(data.status=="success"){if(data.laptopCount!=1)
{setProductSingOrPlur(data.laptopCount);}
var numAnim=new CountUp("match-num",data.oldLaptopCount,data.laptopCount);numAnim.start(setProductSingOrPlur);$("#priceRange").fadeIn();$("#priceRange").html(data.priceRange);if(data.laptopCount==0){$(".skip-btn").addClass("disabled");$(".next-btn-click").addClass("disabled");ga('send','event','Wizard page','Zero matches',$("#questionID").val());if(isSelected){if(data.zMCMessageBudget!=''){zeroMatchTitle='Sorry, no '+choosistProduct+' found within your budget';customZeroMatchMessage=data.zMCMessageBudget;}else if(data.zMCMessage!=''){zeroMatchTitle='Sorry, no '+choosistProduct+' found';customZeroMatchMessage=data.zMCMessage;}else{zeroMatchTitle=zeroMatchTitleOriginal;customZeroMatchMessage=zeroMatchMessage;}
swal({html:true,title:zeroMatchTitle,text:customZeroMatchMessage,type:"error"});$(".sweet-alert").animate({scrollTop:0},0);zeroMatchbuttonText=zeroMatchbuttonTextOriginal;$(".sa-confirm-button-container button").html(zeroMatchbuttonText);}}else{$(".next-btn-click").removeClass("disabled");}}},});},});}
return false;});$(window).scroll(function(event){var scroll=$(window).scrollTop();var width=$(window).width();if(scroll>64){$(".bottom-btn").addClass('stick');}
else{$(".bottom-btn").removeClass('stick');}});function gaTrack(path,title){ga('set',{page:path,title:title});ga('send','pageview');}
function setProductSingOrPlur(lCount)
{if(lCount!=null&&lCount!=1)
{$('#pText').html(choosistProductPlural);}
else if($('#match-num').html()==1)
{$('#pText').html(choosistProductSingular);}
else
{$('#pText').html(choosistProductPlural);}}});function showBackRing(){$(".prev-ring").addClass("visible");$("#bckNew").find(".fa").addClass("hide-icon");}