Dell=window.Dell||{},Dell.ContactDrawer=Dell.ContactDrawer||{},Dell.ContactDrawer.contactDomain=Dell.ContactDrawer.contactDomain||{},function(e,t){(function(){"use strict";var a,n,o=!0,i=!0,r=!1,d="localStorage"in e&&null!=e.localStorage,c="sessionStorage"in e&&null!=e.sessionStorage,s="__amplify__contactDrawerIsHardClosed",l="chat__session__started",u="True"===f("data-EnableMoxieChat")&&!(-1!==navigator.appVersion.indexOf("MSIE 10")),m=!1,g=36e5,w=!1,p=e.matchMedia("(max-width: 767px)").matches,h={openTime:5e3,closedTime:7e3,transitionTime:500,popOutOnPageLoad:!1},v=["GoMoxie:widgetOpened","GoMoxie:widgetMinimized","GoMoxie:widgetClosed","GoMoxie:transactionComplete","GoMoxie:widget:chat:prechatQuestionnaireComplete","GoMoxie:widget:chat:chatSessionStarted","GoMoxie:widget:chat:agentJoinedSession","GoMoxie:widget:chat:agentLeftSession","GoMoxie:widget:chat:chatSessionEnded","GoMoxie:widget:chat:surveyLoaded"];function f(e,a){return a||(a=t.getElementsByClassName("dds__drawer-content")[0]),a.hasAttribute(e)?a.getAttribute(e):""}var S=function(){var e=new XMLHttpRequest;e.withCredentials=!0,e.dataType="json";var a=f("data-personalizedLabelWithoutCategoryName"),n=f("data-personalizationUrl");e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE&&200===e.status){var n=JSON.parse(e.responseText);if(n){var o="";n.WarmState&&(void 0===(i=o=a)||null==i||i.length<=0||(o=o.replace("{0}",n.DisplayName),t.getElementById("chat-drawer-personalize-message-subtitle").innerHTML=o))}}var i},e.open("GET",n,!0),e.send()};function x(){o=!0,a.classList.add("dds__drawer-open"),n.hidden=!1}function _(){o=!1,a.classList.remove("dds__drawer-open"),setTimeout(function(){n.hidden=!0},h.transitionTime)}function y(){o?_():(x(),null!==dellmetrics_trackdata&&(e.matchMedia("(max-width: 992px)").matches?dellmetrics_trackdata("chatdrawerbottom"):dellmetrics_trackdata("chatdrawerrightrail")))}function T(){if(!m){e.MoxieData||(e.MoxieData={},e.MoxieData.country=f("data-country"),e.MoxieData.language=f("data-language"),e.MoxieData.segment=f("data-segment"));var a=t.createElement("script"),n=f("data-MoxieTenant"),o=f("data-MoxieHost");a.src=f("data-MoxieConciergeUrl"),a.type="text/javascript",a.setAttribute("data-concierge-host",o),a.setAttribute("data-client",n),a.setAttribute("concierge","1"),a.setAttribute("defer","true"),t.getElementsByTagName("body")[0].appendChild(a),m=!0}}function M(){return p?t.querySelector('ul#concierge-widgets-ul li[data-widget="chat"]')&&t.querySelector("button#concierge-tab")?t.querySelector("button#concierge-tab"):void 0:t.querySelector(".con-icon")}function D(e){p?e.dispatchEvent(new Event("touchstart")):e.click()}function L(e){var o,i;if(n=(a=e).querySelector(".dds__drawer-content"),a.querySelector(".dds__drawer-tab").addEventListener("click",function(e){e.preventDefault(),r||(r=!0),P(),y()}),a.querySelector(".dds__drawer-close-button").addEventListener("click",function(){r||(r=!0),P(),_(),null!==dellmetrics_trackdata&&dellmetrics_trackdata("chatdrawerclose")}),o=n.getAttribute("data-contact-drawer"),(i=JSON.parse(o))&&(i.OpenTimeInSeconds&&(h.openTime=1e3*i.OpenTimeInSeconds),i.CloseTimeInSeconds&&(h.closedTime=1e3*i.CloseTimeInSeconds),i.TransitionTimeInMilliseconds&&(h.transitionTime=i.TransitionTimeInMilliseconds),i.OpenTimeInSeconds&&i.CloseTimeInSeconds||(r=!0),i.PopOutOnPageLoad&&(h.popOutOnPageLoad=i.PopOutOnPageLoad)),u){(C(l)||O(l))&&T();var d=a.querySelector(".cd__drawer-displayonconciergeready");d&&d.addEventListener("click",function(e){e.stopImmediatePropagation(),e.preventDefault(),t.querySelector(".cd__drawer-shadow-box").parentNode.classList.add("cd__drawer-moxie-loading"),w=!0;var a=M();a?(t.querySelector(".cd__drawer-shadow-box").parentNode.classList.remove("cd__drawer-moxie-loading"),D(a)):(t.querySelector(".cd__drawer-shadow-box").parentNode.classList.add("cd__drawer-moxie-loading"),T())})}}function C(t){return c&&!(null===e.sessionStorage.getItem(t))}function E(){var t,a;a="1",!C(t=l)&&c&&e.sessionStorage.setItem(t,a)}function b(){G(l,"1")}function I(){var t=new Date;t.setDate(t.getDate()-100),G(l,"0",t.toUTCString()),c&&e.sessionStorage.removeItem(l)}function O(e){return"1"===function(e){for(var a=e+"=",n=t.cookie.split(";"),o=0;o<n.length;o++){var i=n[o].trim();if(0==i.indexOf(a))return i.substring(a.length,i.length)}return""}(e)}function G(e,a,n){t.cookie=e+"="+a+";expires="+n+";path=/; domain=.dell.com;"}function k(t){"function"==typeof e.dellmetrics_trackvalue&&e.dellmetrics_trackvalue(t.type)}function q(){for(var t=0;t<v.length;t++)e.removeEventListener(v[t],k)}function N(){if(e.addEventListener("GoMoxie:widget:chat:chatSessionStarted",E),e.addEventListener("GoMoxie:widget:chat:chatSessionStarted",b),e.addEventListener("GoMoxie:widget:chat:chatSessionEnded",I),function(){q();for(var t=0;t<v.length;t++)e.addEventListener(v[t],k,!1)}(),w)var a=setInterval(function(){var e=M();e&&(t.querySelector(".cd__drawer-shadow-box").parentNode.classList.remove("cd__drawer-moxie-loading"),D(e),clearInterval(a))},50)}function A(){r||(o?(_(),h.closedTime&&setTimeout(function(){return A()},h.closedTime)):(x(),h.openTime&&setTimeout(function(){return A()},h.openTime)))}function P(){try{d&&!z()&&e.localStorage.setItem(s,JSON.stringify({data:!0,expires:Date.now()+g}))}catch(e){console.error(e)}}function z(){return d&&!(null===e.localStorage.getItem(s))}function B(e){L(t.getElementById(e)),h.transitionTime>h.openTime||h.transitionTime>h.closedTime?console.warn("contact drawer transition time is too large"):a&&(a.style.transition="all "+h.transitionTime+"ms ease"),!z()&&(p?"true"===f("data-stay-open-in-mobile").toLowerCase():i)?h.popOutOnPageLoad?(x(),h.openTime&&setTimeout(function(){return A()},h.openTime)):A():o=!1}this.Init=function(e){if(B(e),"true"==f("data-EnabledPersonalization").toLowerCase()&&S(),"true"==f("data-EnabledAvaChat").toLowerCase()){var a=t.querySelector("#nit-alme-window-root");t.body.appendChild(a);var n,o=t.getElementsByClassName("virtualChatAnchor");for(n=0;n<o.length;n++)o[n].style.display="block";Dell.ContactDrawer.VirtualChat.AvaChat.InvokeAVA()}},e.addEventListener("Dell.ContactDrawer.CloseContactDrawer",function(e){console.log("CD closed"),_()}),u&&(e.addEventListener("GoMoxie:conciergeReady",N),e.addEventListener("unload",function(){e.removeEventListener("GoMoxie:conciergeReady",N),q(),(C(l)||O(l))&&(e.removeEventListener("GoMoxie:widget:chat:chatSessionStarted",E),e.removeEventListener("GoMoxie:widget:chat:chatSessionStarted",b),e.removeEventListener("GoMoxie:widget:chat:chatSessionEnded",I))}))}).call(Dell.ContactDrawer.contactDomain)}(window,document);